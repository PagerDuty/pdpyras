<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>User Guide &#8212; PagerDuty Python REST API Sessions 5.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=cb25574f" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=f02a3fcf"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Module Reference" href="module_reference.html" />
    <link rel="prev" title="Changelog" href="changelog.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="user-guide">
<span id="id1"></span><h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this heading">¶</a></h1>
<p>This is a topical guide to general API client usage. <a class="reference internal" href="module_reference.html#module-reference"><span class="std std-ref">Module Reference</span></a>
has in-depth documentation on client classes and methods.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<p>If <code class="docutils literal notranslate"><span class="pre">pip</span></code> is available, it can be installed via:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install pdpyras
</pre></div>
</div>
<p>Alternately, if the dependencies (<a class="reference external" href="https://docs.python-requests.org/en/master/.._`Errors`:https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTYz-errors">Requests</a> and “deprecation” Python libraries)
have been installed locally, one can download <code class="docutils literal notranslate"><span class="pre">pdpyras.py</span></code> into the directory
where it will be used.</p>
</section>
<section id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this heading">¶</a></h2>
<p>The first step is to construct a session object. The first argument to the
constructor is the secret to use for accessing the API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pdpyras</span>

<span class="c1"># REST API v2:</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">APISession</span><span class="p">(</span><span class="n">API_KEY</span><span class="p">)</span>

<span class="c1"># REST API v2 with an OAuth2 access token:</span>
<span class="n">session_oauth</span> <span class="o">=</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">APISession</span><span class="p">(</span><span class="n">OAUTH_TOKEN</span><span class="p">,</span> <span class="n">auth_type</span><span class="o">=</span><span class="s1">&#39;oauth2&#39;</span><span class="p">)</span>

<span class="c1"># Events API v2:</span>
<span class="n">events_session</span> <span class="o">=</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">EventsAPISession</span><span class="p">(</span><span class="n">ROUTING_KEY</span><span class="p">)</span>

<span class="c1"># A special session class for the change events API (part of Events API v2):</span>
<span class="n">change_events_session</span> <span class="o">=</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">ChangeEventsAPISession</span><span class="p">(</span><span class="n">ROUTING_KEY</span><span class="p">)</span>
</pre></div>
</div>
<p>Session objects, being descendants of <a class="reference external" href="https://docs.python-requests.org/en/master/api/#request-sessions">requests.Session</a>, can also be used as
context managers. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">APISession</span><span class="p">(</span><span class="n">API_KEY</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">do_application</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</pre></div>
</div>
<section id="the-from-header">
<h3>The From header<a class="headerlink" href="#the-from-header" title="Permalink to this heading">¶</a></h3>
<p>If the <a class="reference external" href="https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTUw-rest-api-v2-overview">REST API v2</a> session will be used for API endpoints that require a
<code class="docutils literal notranslate"><span class="pre">From</span></code> header, such as those that take actions on incidents, and if it is
using an account-level API key (created by an administrator via the “API Access
Keys” page in the “Integrations” menu), the user must also supply the
<code class="docutils literal notranslate"><span class="pre">default_from</span></code> keyword argument. Otherwise, a HTTP 400 response will result
when making requests to such endpoints.</p>
<p>Otherwise, if using a user’s API key (created under “API Access” in the “User
Settings” tab of the user’s profile), the user will be derived from the key
itself and <code class="docutils literal notranslate"><span class="pre">default_from</span></code> is not necessary.</p>
</section>
<section id="using-non-us-service-regions">
<h3>Using Non-US Service Regions<a class="headerlink" href="#using-non-us-service-regions" title="Permalink to this heading">¶</a></h3>
<p>If your PagerDuty account is in the EU or other service region outside the US, set the <code class="docutils literal notranslate"><span class="pre">url</span></code> attribute according to the
documented <a class="reference external" href="https://support.pagerduty.com/docs/service-regions#api-access-urls">API Access URLs</a>, i.e. for the EU:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># REST API</span>
<span class="n">session</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.eu.pagerduty.com&#39;</span>
<span class="c1"># Events API:</span>
<span class="n">events_session</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://events.eu.pagerduty.com&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="basic-usage-examples">
<h2>Basic Usage Examples<a class="headerlink" href="#basic-usage-examples" title="Permalink to this heading">¶</a></h2>
<section id="rest-api-v2">
<h3>REST API v2<a class="headerlink" href="#rest-api-v2" title="Permalink to this heading">¶</a></h3>
<p><strong>Making a request and decoding the response:</strong> obtaining a resource’s contents
and having them represented as a dictionary object using three different methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using get:</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/users/PABC123&#39;</span><span class="p">)</span>
<span class="n">user</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>

<span class="c1"># Using jget (return the full body after decoding):</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">jget</span><span class="p">(</span><span class="s1">&#39;/users/PABC123&#39;</span><span class="p">)[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>

<span class="c1"># Using rget (return the response entity after unwrapping):</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">rget</span><span class="p">(</span><span class="s1">&#39;/users/PABC123&#39;</span><span class="p">)</span>

<span class="c1"># &gt;&gt;&gt; user</span>
<span class="c1"># {&quot;type&quot;: &quot;user&quot;, &quot;email&quot;: &quot;user@example.com&quot;, ... }</span>
</pre></div>
</div>
<p><strong>Using pagination:</strong> <code class="docutils literal notranslate"><span class="pre">iter_all</span></code>, <code class="docutils literal notranslate"><span class="pre">iter_cursor</span></code>, <code class="docutils literal notranslate"><span class="pre">list_all</span></code> and
<code class="docutils literal notranslate"><span class="pre">dict_all</span></code> can be used to obtain results from a resource collection:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print each user&#39;s email address and name:</span>
<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">iter_all</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">],</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Pagination with query parameters:</strong> set the <code class="docutils literal notranslate"><span class="pre">params</span></code> keyword argument, which is
converted to URL query parameters by <a class="reference external" href="https://docs.python-requests.org/en/master/.._`Errors`:https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTYz-errors">Requests</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get a list of all services with &quot;SN&quot; in their name:</span>
<span class="n">services</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">list_all</span><span class="p">(</span><span class="s1">&#39;services&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s1">&#39;SN&#39;</span><span class="p">})</span>

<span class="c1"># &gt;&gt;&gt; services</span>
<span class="c1"># [{&#39;type&#39;:&#39;service&#39;, ...}, ...]</span>
</pre></div>
</div>
<p><strong>Searching resource collections:</strong> use <code class="docutils literal notranslate"><span class="pre">find</span></code> to look up a resource exactly
matching a string using the <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter on an index endpoint:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find the user with email address &quot;jane@example35.com&quot;</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;jane@example35.com&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;email&#39;</span><span class="p">)</span>

<span class="c1"># &gt;&gt;&gt; user</span>
<span class="c1"># {&#39;type&#39;: &#39;user&#39;, &#39;email&#39;: &#39;jane@example35.com&#39;, ...}</span>
</pre></div>
</div>
<p><strong>Updating a resource:</strong> use the <code class="docutils literal notranslate"><span class="pre">json</span></code> keyword argument to set the body:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assuming there is a variable &quot;user&quot; defined that is a dictionary</span>
<span class="c1"># representation of a PagerDuty user, i.e. as returned by rget or find:</span>

<span class="c1"># (1) using put directly:</span>
<span class="n">updated_user</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;self&#39;</span><span class="p">],</span> <span class="n">json</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Jane Doe&#39;</span>
    <span class="p">}</span>
<span class="p">})</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
    <span class="n">updated_user</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span>

<span class="c1"># (2) using rput:</span>
<span class="c1">#   - The URL argument can be the dictionary representation</span>
<span class="c1">#   - The json argument doesn&#39;t have to include the &quot;user&quot; wrapper dict</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">updated_user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">rput</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Jane Doe&#39;</span>
    <span class="p">})</span>
<span class="k">except</span> <span class="n">PDClientError</span><span class="p">:</span>
    <span class="n">updated_user</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
<p><strong>Idempotent create/update:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a user if one doesn&#39;t already exist based on the dictionary object</span>
<span class="c1"># user_data, using the &#39;email&#39; key as the uniquely identifying property,</span>
<span class="c1"># and update it if it exists and differs from user_data:</span>
<span class="n">user_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;user123@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;User McUserson&#39;</span><span class="p">}</span>
<span class="n">updated_user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">persist</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="n">user_data</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Using multi-valued set filters:</strong> set the value in the <code class="docutils literal notranslate"><span class="pre">params</span></code> dictionary
at the appropriate key to a list. Square brackets will then be automatically
appended to the names of list-type-value parameters as necessary. Ordinarily
(and in pdpyras versions prior to 4.4.0) one must include <code class="docutils literal notranslate"><span class="pre">[]</span></code> at the end of
the paramter name to denote a set type filter. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Query all open incidents assigned to a user</span>
<span class="n">incidents</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">list_all</span><span class="p">(</span>
    <span class="s1">&#39;incidents&#39;</span><span class="p">,</span>
    <span class="n">params</span><span class="o">=</span><span class="p">{</span>
      <span class="s1">&#39;user_ids[]&#39;</span><span class="p">:[</span><span class="s1">&#39;PHIJ789&#39;</span><span class="p">],</span> <span class="c1"># (Necessary in &lt; 4.4.0, compatible with &gt;= 4.4.0)</span>
      <span class="s1">&#39;statuses&#39;</span><span class="p">:[</span><span class="s1">&#39;triggered&#39;</span><span class="p">,</span> <span class="s1">&#39;acknowledged&#39;</span><span class="p">]</span> <span class="c1"># (&gt;= 4.4.0)</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="c1"># API calls will look like the following:</span>
<span class="c1"># GET /incidents?user_ids%5B%5D=PHIJ789&amp;statuses%5B%5D=triggered&amp;statuses%5B%5D=acknowledged&amp;offset=0&amp;limit=100</span>
</pre></div>
</div>
<p><strong>Performing multi-update:</strong> for endpoints that support it only, i.e. <code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">/incidents</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Acknowledge all triggered incidents assigned to a user:</span>
<span class="n">incidents</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">list_all</span><span class="p">(</span>
    <span class="s1">&#39;incidents&#39;</span><span class="p">,</span>
    <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;user_ids&#39;</span><span class="p">:[</span><span class="s1">&#39;PHIJ789&#39;</span><span class="p">],</span><span class="s1">&#39;statuses&#39;</span><span class="p">:[</span><span class="s1">&#39;triggered&#39;</span><span class="p">]}</span>
<span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">incidents</span><span class="p">:</span>
    <span class="n">i</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;acknowledged&#39;</span>
<span class="n">updated_incidents</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">rput</span><span class="p">(</span><span class="s1">&#39;incidents&#39;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">incidents</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="events-api-v2">
<h3>Events API v2<a class="headerlink" href="#events-api-v2" title="Permalink to this heading">¶</a></h3>
<p><strong>Trigger and resolve an alert,</strong> getting its deduplication key from the API, using <code class="xref py py-class docutils literal notranslate"><span class="pre">EventsAPISession</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dedup_key</span> <span class="o">=</span> <span class="n">events_session</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;Server is on fire&quot;</span><span class="p">,</span> <span class="s1">&#39;dusty.old.server.net&#39;</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="n">events_session</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">dedup_key</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Trigger an alert and acknowledge it</strong> using a custom deduplication key:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">events_session</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;Server is on fire&quot;</span><span class="p">,</span> <span class="s1">&#39;dusty.old.server.net&#39;</span><span class="p">,</span>
    <span class="n">dedup_key</span><span class="o">=</span><span class="s1">&#39;abc123&#39;</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="n">events_session</span><span class="o">.</span><span class="n">acknowledge</span><span class="p">(</span><span class="s1">&#39;abc123&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Submit a change event</strong> using a <code class="xref py py-class docutils literal notranslate"><span class="pre">ChangeEventsAPISession</span></code> instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">change_events_session</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="s2">&quot;new build finished at latest HEAD&quot;</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="s2">&quot;automation&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="generic-client-features">
<h2>Generic Client Features<a class="headerlink" href="#generic-client-features" title="Permalink to this heading">¶</a></h2>
<p>Generally, all of the features of <a class="reference external" href="https://docs.python-requests.org/en/master/api/#request-sessions">requests.Session</a> are available to the user
as they would be if using the Requests Python library directly, since
<a class="reference internal" href="module_reference.html#pdpyras.PDSession" title="pdpyras.PDSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">pdpyras.PDSession</span></code></a> and its subclasses for the REST/Events APIs are
descendants of it.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">post</span></code>, <code class="docutils literal notranslate"><span class="pre">put</span></code> and <code class="docutils literal notranslate"><span class="pre">delete</span></code> methods of REST/Events API
session classes are similar to the analogous functions in <a class="reference external" href="https://docs.python-requests.org/en/master/api/#request-sessions">requests.Session</a>.
The arguments they accept are the same and they all return <a class="reference external" href="https://docs.python-requests.org/en/master/api/#requests.Response">requests.Response</a>
objects.</p>
<p>Any keyword arguments passed to the <code class="docutils literal notranslate"><span class="pre">j*</span></code> or <code class="docutils literal notranslate"><span class="pre">r*</span></code> methods will be passed
through to the analogous method in <a class="reference external" href="https://docs.python-requests.org/en/master/.._`Errors`:https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTYz-errors">Requests</a>, though in some cases the
arguments (i.e. <code class="docutils literal notranslate"><span class="pre">json</span></code>) are first modified.</p>
<p>For documentation on any generic HTTP client features that are available, refer
to the <a class="reference external" href="https://docs.python-requests.org/en/master/.._`Errors`:https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTYz-errors">Requests</a> documentation.</p>
</section>
<section id="urls">
<h2>URLs<a class="headerlink" href="#urls" title="Permalink to this heading">¶</a></h2>
<p>The first argument to most of the session methods is the URL. However, there is
no need to specify a complete API URL. Any path relative to the root of the
API, whether or not it includes a leading slash, is automatically normalized to
a complete API URL.  For instance, one can specify <code class="docutils literal notranslate"><span class="pre">users/PABC123</span></code> or
<code class="docutils literal notranslate"><span class="pre">/users/PABC123</span></code> instead of <code class="docutils literal notranslate"><span class="pre">https://api.pagerduty.com/users/PABC123</span></code>.</p>
<p>One can also pass the full URL of an API endpoint and it will still work, i.e.
the <code class="docutils literal notranslate"><span class="pre">self</span></code> property of any object can be used, and there is no need to strip
out the API base URL.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">r*</span></code> (and <code class="docutils literal notranslate"><span class="pre">j*</span></code> methods as of version 5), i.e.
<a class="reference internal" href="module_reference.html#pdpyras.APISession.rget" title="pdpyras.APISession.rget"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.rget</span></code></a>, can also accept a dictionary object
representing an API resource or a resource reference in place of a URL, in
which case the URL at its <code class="docutils literal notranslate"><span class="pre">self</span></code> key will be used as the request target.</p>
</section>
<section id="query-parameters">
<h2>Query Parameters<a class="headerlink" href="#query-parameters" title="Permalink to this heading">¶</a></h2>
<p>As with <a class="reference external" href="https://docs.python-requests.org/en/master/.._`Errors`:https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTYz-errors">Requests</a>, there is no need to compose the query string (everything
that will follow <code class="docutils literal notranslate"><span class="pre">?</span></code> in the URL). Simply set the <code class="docutils literal notranslate"><span class="pre">params</span></code> keyword argument
to a dictionary, and each of the key/value pairs will be serialized to the
query string in the final URL of the request:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">first_dan</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">rget</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s1">&#39;Dan&#39;</span><span class="p">,</span>
    <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">})</span>
<span class="c1"># GET https://api.pagerduty.com/users?query=Dan&amp;limit=1&amp;offset=0</span>
</pre></div>
</div>
<p>To specify a multi-value parameter, i.e. <code class="docutils literal notranslate"><span class="pre">include[]</span></code>, set the argument to a
list. As of v4.4.0, if a list is given, and the key name does not end with
<code class="docutils literal notranslate"><span class="pre">[]</span></code> (which is required for all such multi-valued parameters in REST API v2),
then <code class="docutils literal notranslate"><span class="pre">[]</span></code> will be automatically appended to the parameter name.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># If there are 82 services with name matching &quot;foo&quot; this will return all of</span>
<span class="c1"># them as a list:</span>
<span class="n">foo_services</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">list_all</span><span class="p">(</span><span class="s1">&#39;services&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;include&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;escalation_policies&#39;</span><span class="p">,</span> <span class="s1">&#39;teams&#39;</span><span class="p">],</span>
    <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
<span class="p">})</span>
<span class="c1"># GET https://api.pagerduty.com/services?query=foo&amp;include%5B%5D=escalation_policies&amp;include%5B%5D=teams&amp;limit=50&amp;offset=0</span>
<span class="c1"># GET https://api.pagerduty.com/services?query=foo&amp;include%5B%5D=escalation_policies&amp;include%5B%5D=teams&amp;limit=50&amp;offset=50</span>
<span class="c1"># &gt;&gt;&gt; foo_services</span>
<span class="c1"># [{&quot;type&quot;: &quot;service&quot; ...}, ... ]</span>
</pre></div>
</div>
</section>
<section id="requests-and-responses">
<h2>Requests and Responses<a class="headerlink" href="#requests-and-responses" title="Permalink to this heading">¶</a></h2>
<p>To set the request body in a post or put request, pass as the <code class="docutils literal notranslate"><span class="pre">json</span></code> keyword
argument an object that will be JSON-encoded as the body.</p>
<p>To obtain the response from the API, if using plain <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">post</span></code>, <code class="docutils literal notranslate"><span class="pre">put</span></code>
or <code class="docutils literal notranslate"><span class="pre">delete</span></code>, use the returned <a class="reference external" href="https://docs.python-requests.org/en/master/api/#requests.Response">requests.Response</a> object. That object’s
<code class="docutils literal notranslate"><span class="pre">json()</span></code> method will return the result of JSON-decoding the response body (it
will typically of type <code class="docutils literal notranslate"><span class="pre">dict</span></code>). Other metadata such as headers can also be
obtained:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;incidents&#39;</span><span class="p">)</span>
<span class="c1"># The UUID of the API request, which can be supplied to PagerDuty Customer</span>
<span class="c1"># Support in the event of server errors (status 5xx):</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;x-request-id&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>If using the <code class="docutils literal notranslate"><span class="pre">j*</span></code> methods, i.e. <a class="reference internal" href="module_reference.html#pdpyras.APISession.jget" title="pdpyras.APISession.jget"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.jget</span></code></a>, the return value
will be the full body of the response from the API after JSON-decoding, and
the <code class="docutils literal notranslate"><span class="pre">json</span></code> keyword argument is not modified.</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">r*</span></code> methods, the <code class="docutils literal notranslate"><span class="pre">json</span></code> keyword argument is modified before
sending to <a class="reference external" href="https://docs.python-requests.org/en/master/.._`Errors`:https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTYz-errors">Requests</a>, if necessary, to encapsulate the body inside an entity
wrapper.  The response is the decoded body after unwrapping, if the API
endpoint returns wrapped entities. For more details, refer to <a class="reference internal" href="#wrapping"><span class="std std-ref">Entity Wrapping</span></a>.</p>
<section id="data-types">
<h3>Data types<a class="headerlink" href="#data-types" title="Permalink to this heading">¶</a></h3>
<p>Main article: <a class="reference external" href="https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTU1-types">Types</a></p>
<p>Note these analogues in structure between the JSON schema and the object
in Python:</p>
<ul class="simple">
<li><p>If the data type documented in the schema is
<a class="reference external" href="https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTU1-types#object">“object”</a>,
then the corresponding type of the Python object will be <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p></li>
<li><p>If the data type documented in the schema is
<a class="reference external" href="https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTU1-types#array">array</a>,
then the corresponding type of the Python object will be <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p></li>
<li><p>Generally speaking, the data type in the decoded object is according to the
design of the <a class="reference external" href="https://docs.python.org/3/library/json.html">json</a> Python library.</p></li>
</ul>
<p>For example, consider the example structure of an escalation policy as given in
the API reference page for <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/escalation_policies/{id}</span></code> (“Get an
escalation policy”).. To access the name of the second target in level 1,
assuming the variable <code class="docutils literal notranslate"><span class="pre">ep</span></code> represents the unwrapped escalation policy object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ep</span><span class="p">[</span><span class="s1">&#39;escalation_rules&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;targets&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;summary&#39;</span><span class="p">]</span>
<span class="c1"># &quot;Daily Engineering Rotation&quot;</span>
</pre></div>
</div>
<p>To add a new level, one would need to create a new escalation rule as a
dictionary object and then append it to the <code class="docutils literal notranslate"><span class="pre">escalation</span> <span class="pre">rules</span></code> property.
Using the example given in the API reference page:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_rule</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;escalation_delay_in_minutes&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s2">&quot;targets&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;PAM4FGS&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;user_reference&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;PI7DH85&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;schedule_reference&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
<span class="n">ep</span><span class="p">[</span><span class="s1">&#39;escalation_rules&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_rule</span><span class="p">)</span>
<span class="c1"># Save changes:</span>
<span class="n">session</span><span class="o">.</span><span class="n">rput</span><span class="p">(</span><span class="n">ep</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">ep</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="resource-schemas">
<h3>Resource schemas<a class="headerlink" href="#resource-schemas" title="Permalink to this heading">¶</a></h3>
<p>Main article: <a class="reference external" href="https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTU5-resource-schemas">Resource Schemas</a></p>
<p>The details of any given resource’s schema can be found in the request and
response examples from the <a class="reference external" href="https://developer.pagerduty.com/api-reference/">PagerDuty API Reference</a> pages for the resource’s
respective API, as well as the page documenting the resource type itself.</p>
</section>
</section>
<section id="entity-wrapping">
<span id="wrapping"></span><h2>Entity Wrapping<a class="headerlink" href="#entity-wrapping" title="Permalink to this heading">¶</a></h2>
<p>See also: <a class="reference external" href="https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTYx-wrapped-entities">Wrapped Entities</a>.
Most of PagerDuty’s REST API v2 endpoints respond with their content wrapped
inside of another object with a single key at the root level of the
(JSON-encoded) response body, and/or require the request body be wrapped in
another object that contains a single key. Endpoints with such request/response
schemas are said to wrap entities.</p>
<section id="wrapped-entity-aware-functions">
<h3>Wrapped-entity-aware Functions<a class="headerlink" href="#wrapped-entity-aware-functions" title="Permalink to this heading">¶</a></h3>
<p>The following methods will automatically extract and return the wrapped content
of API responses, and wrap request entities for the user as appropriate:</p>
<ul class="simple">
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.dict_all" title="pdpyras.APISession.dict_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.dict_all</span></code></a>: Create a dictionary of all results from a resource collection</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.find" title="pdpyras.APISession.find"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.find</span></code></a>: Find and return a specific result of a resource collection that matches a query</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.iter_all" title="pdpyras.APISession.iter_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.iter_all</span></code></a>: Iterate through all results of a resource collection</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.iter_cursor" title="pdpyras.APISession.iter_cursor"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.iter_cursor</span></code></a>: Iterate through all results of a resource collection using cursor-based pagination</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.list_all" title="pdpyras.APISession.list_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.list_all</span></code></a>: Create a list of all results from a resource collection</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.persist" title="pdpyras.APISession.persist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.persist</span></code></a>: Create a resource entity with specified attributes if one that matches them does not already exist</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.rget" title="pdpyras.APISession.rget"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.rget</span></code></a>: Get the wrapped entity or resource collection at a given endpoint</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.rpost" title="pdpyras.APISession.rpost"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.rpost</span></code></a>: Send a POST request, wrapping the request entity / unwrapping the response entity</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.APISession.rput" title="pdpyras.APISession.rput"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.rput</span></code></a>: Send a PUT request, wrapping the request entity / unwrapping the response entity</p></li>
</ul>
</section>
<section id="classic-patterns">
<h3>Classic Patterns<a class="headerlink" href="#classic-patterns" title="Permalink to this heading">¶</a></h3>
<p>Typically (but not for all endpoints), the key (“wrapper name”) is named after
the last or second to last node of the URL’s path. The wrapper name is a
singular noun for an individual resource or plural for a collection of
resources. As of v5.0.0, the above methods support endpoints where that pattern
does not apply. In versions prior to v5.0.0, they may only be used on APIs that
follow these conventions, and will run into <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> when used on endpoints
that do not.</p>
</section>
<section id="special-cases">
<h3>Special Cases<a class="headerlink" href="#special-cases" title="Permalink to this heading">¶</a></h3>
<p>On endpoints that do not wrap entities, however, the results for a given <code class="docutils literal notranslate"><span class="pre">r*</span></code>
method would be the same if using the equivalent <code class="docutils literal notranslate"><span class="pre">j*</span></code> method. This is
necessary to avoid discarding features of the response schema.</p>
<p>The configuration that this client uses to decide if entity wrapping is enabled
for an endpoint or not is stored in the module variable
<a class="reference internal" href="module_reference.html#pdpyras.ENTITY_WRAPPER_CONFIG" title="pdpyras.ENTITY_WRAPPER_CONFIG"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.ENTITY_WRAPPER_CONFIG</span></code></a> and generally follows this rule: <em>If the
endpoint’s response body or expected request body contains only one property
that points to all the content of the requested resource, entity wrapping is
enabled for the endpoint.</em> The only exception is for resource collection
endpoints that support pagination, where response bodies have additional
pagination control properties like <code class="docutils literal notranslate"><span class="pre">more</span></code> but only one content-bearing
property that wraps the collection of results.</p>
<p>This rule also applies to endpoints like <code class="docutils literal notranslate"><span class="pre">POST</span>
<span class="pre">/business_services/{id}/subscribers</span></code> where the response is wrapped differently
than the request. One can still pass the content to be wrapped via the <code class="docutils literal notranslate"><span class="pre">json</span></code>
argument without the <code class="docutils literal notranslate"><span class="pre">subscribers</span></code> wrapper, while the return value is the
list representing the content inside of the <code class="docutils literal notranslate"><span class="pre">subscriptions</span></code> wrapper in the
response, and there is no need to incorporate any particular endpoint’s wrapper
name into the implementation.</p>
<p>Some endpoints are unusual in that the request must be wrapped but the response
is not wrapped or vice versa, i.e. creating Schedule overrides (<code class="docutils literal notranslate"><span class="pre">POST</span>
<span class="pre">/schedules/{id}/overrides</span></code>) or to create a status update on an incient (<code class="docutils literal notranslate"><span class="pre">POST</span>
<span class="pre">/incidents/{id}/status_updates</span></code>). In all such cases, the user still does not
need to account for this, as the content will be returned and the request
entity is wrapped as appropriate. For instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">created_overrides</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">rpost</span><span class="p">(</span><span class="s1">&#39;/schedules/PGHI789/overrides&#39;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-07-01T00:00:00-04:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-07-02T00:00:00-04:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;PEYSGVA&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;user_reference&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;time_zone&quot;</span><span class="p">:</span> <span class="s2">&quot;UTC&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-07-03T00:00:00-04:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-07-01T00:00:00-04:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;PEYSGVF&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;user_reference&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;time_zone&quot;</span><span class="p">:</span> <span class="s2">&quot;UTC&quot;</span>
    <span class="p">}</span>
<span class="p">])</span>
<span class="c1"># &gt;&gt;&gt; created_overrides</span>
<span class="c1"># [</span>
<span class="c1">#     {&#39;status&#39;: 201, &#39;override&#39;: {...}},</span>
<span class="c1">#     {&#39;status&#39;: 400, &#39;errors&#39;: [&#39;Override must end after its start&#39;], &#39;override&#39;: {...}}</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
</section>
<section id="pagination">
<h2>Pagination<a class="headerlink" href="#pagination" title="Permalink to this heading">¶</a></h2>
<p>The method <a class="reference internal" href="module_reference.html#pdpyras.APISession.iter_all" title="pdpyras.APISession.iter_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.iter_all</span></code></a> returns an iterator that yields
results from an endpoint that returns a wrapped collection of resources. By
default it will use classic, a.k.a. numeric pagination. If the endpoint
supports cursor-based pagination, it will use
<a class="reference internal" href="module_reference.html#pdpyras.APISession.iter_cursor" title="pdpyras.APISession.iter_cursor"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.iter_cursor</span></code></a> to iterate through results instead. The
methods <a class="reference internal" href="module_reference.html#pdpyras.APISession.list_all" title="pdpyras.APISession.list_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.list_all</span></code></a> and
<a class="reference internal" href="module_reference.html#pdpyras.APISession.dict_all" title="pdpyras.APISession.dict_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.dict_all</span></code></a> will request all pages of the collection
and return the results as a list or dictionary, respectively.</p>
<p>Pagination functions require that the API endpoint being requested have entity
wrapping enabled, and respond with either a <code class="docutils literal notranslate"><span class="pre">more</span></code> or <code class="docutils literal notranslate"><span class="pre">cursor</span></code> property
indicating how and if to fetch the next page of results.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example: Find all users with &quot;Dav&quot; in their name/email (i.e. Dave/David)</span>
<span class="c1"># in the PagerDuty account:</span>
<span class="k">for</span> <span class="n">dave</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">iter_all</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span><span class="s2">&quot;Dav&quot;</span><span class="p">}):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> &lt;</span><span class="si">%s</span><span class="s2">&gt;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">dave</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">dave</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]))</span>

<span class="c1"># Example: Get a dictionary of all users, keyed by email, and use it to</span>
<span class="c1"># find the ID of the user whose email is ``bob@example.com``</span>
<span class="n">users</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">dict_all</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s1">&#39;email&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">users</span><span class="p">[</span><span class="s1">&#39;bob@example.com&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>

<span class="c1"># Same as above, but using ``find``:</span>
<span class="n">bob</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;bob@example.com&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;email&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bob</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</pre></div>
</div>
<section id="performance-and-completeness-of-results">
<h3>Performance and Completeness of Results<a class="headerlink" href="#performance-and-completeness-of-results" title="Permalink to this heading">¶</a></h3>
<p>Because HTTP requests are made synchronously and not in multiple threads,
requesting all pages of data will happen one page at a time and the functions
<code class="docutils literal notranslate"><span class="pre">list_all</span></code> and <code class="docutils literal notranslate"><span class="pre">dict_all</span></code> will not return until after the final HTTP
response. Simply put, the functions will take longer to return if the total
number of results is higher.</p>
<p>Moreover, if these methods are used to fetch a very large volume of data, and
an error is encountered when this happens, the partial data set will be
discarded when the exception is raised. To make use of partial results, use
<a class="reference internal" href="module_reference.html#pdpyras.APISession.iter_all" title="pdpyras.APISession.iter_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.iter_all</span></code></a>, perform actions on each result
yielded, and catch/handle exceptions as desired.</p>
</section>
<section id="updating-creating-or-deleting-while-paginating">
<h3>Updating, creating or deleting while paginating<a class="headerlink" href="#updating-creating-or-deleting-while-paginating" title="Permalink to this heading">¶</a></h3>
<p>If performing page-wise write operations, i.e. making persistent changes to the
PagerDuty application state immediately after fetching each page of results, an
erroneous condition can result if there is any change to the resources in the
result set that would affect their presence or position in the set. For
example, creating objects, deleting them, or changing the attribute being used
for sorting or filtering.</p>
<p>This is because the contents are updated in real time, and pagination contents
are recalculated based on the state of the PagerDuty application at the time of
each request for a page of results. Therefore, records may be skipped or
repeated in results if the state changes, because the content of any given page
will change accordingly. Note also that changes made from other processes,
including manual edits through the PagerDuty web application, can have the same
effect.</p>
<p>To elaborate: let’s say that each resource object in the full list is a page in
a notebook. Classic pagination with <code class="docutils literal notranslate"><span class="pre">limit=100</span></code> is essentially “go through
100 pages, then repeat starting with the 101st page, then with the 201st, etc.”
Deleting records in-between these 100-at-a-time pagination requests would be
like tearing out pages after reading them. At the time of the second page
request, what was originally the 101st page before starting will shift to
become the first page after tearing out the first hundred pages. Thus, when
going to the 101st page after finishing tearing out the first hundred pages,
the second hundred pages will be skipped over, and similarly for pages 401-500,
601-700 and so on. If attaching pages, the opposite happens: some results will be
returned more than once, because they get bumped to the next group of 100 pages.</p>
</section>
</section>
<section id="multi-updating">
<h2>Multi-updating<a class="headerlink" href="#multi-updating" title="Permalink to this heading">¶</a></h2>
<p>Multi-update actions can be performed using <code class="docutils literal notranslate"><span class="pre">rput</span></code>. As of this writing,
multi-update support includes the following endpoints:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://developer.pagerduty.com/api-reference/b3A6Mjc0ODEzOQ-manage-incidents">PUT /incidents</a></p></li>
<li><p><a class="reference external" href="https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE0NA-manage-alerts">PUT /incidents/{id}/alerts</a></p></li>
<li><p>PUT /priorities (documentation not yet published as of 2023-04-26, but the endpoint is functional)</p></li>
</ul>
<p>For instance, to resolve two incidents with IDs <code class="docutils literal notranslate"><span class="pre">PABC123</span></code> and <code class="docutils literal notranslate"><span class="pre">PDEF456</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">session</span><span class="o">.</span><span class="n">rput</span><span class="p">(</span>
    <span class="s2">&quot;incidents&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;PABC123&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;incident_reference&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">:</span><span class="s1">&#39;resolved&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;PDEF456&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;incident_reference&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">:</span><span class="s1">&#39;resolved&#39;</span><span class="p">},</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In this way, a single API request can more efficiently perform multiple update
actions.</p>
<p>It is important to note, however, that updating incidents requires using a
user-scoped access token or setting the <code class="docutils literal notranslate"><span class="pre">From</span></code> header to the login email
address of a valid PagerDuty user. To set this, pass it through using the
<code class="docutils literal notranslate"><span class="pre">headers</span></code> keyword argument, or set the
<a class="reference internal" href="module_reference.html#pdpyras.APISession.default_from" title="pdpyras.APISession.default_from"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.default_from</span></code></a> property, or pass the email address as
the <code class="docutils literal notranslate"><span class="pre">default_from</span></code> keyword argument when constructing the session initially.</p>
</section>
<section id="error-handling">
<h2>Error Handling<a class="headerlink" href="#error-handling" title="Permalink to this heading">¶</a></h2>
<p>For any of the methods that do not return <a class="reference external" href="https://docs.python-requests.org/en/master/api/#requests.Response">requests.Response</a>, when the API
responds with a non-success HTTP status, the method will raise a
<a class="reference internal" href="module_reference.html#pdpyras.PDClientError" title="pdpyras.PDClientError"><code class="xref py py-class docutils literal notranslate"><span class="pre">pdpyras.PDClientError</span></code></a> exception. This way, these methods can always be
expected to return the same structure of data based on the API being used, and
there is no need to differentiate between the response schema for a successful
request and one for an error response.</p>
<p>The exception class has the <a class="reference external" href="https://docs.python-requests.org/en/master/api/#requests.Response">requests.Response</a> object as its <code class="docutils literal notranslate"><span class="pre">response</span></code>
property whenever the exception pertains to a HTTP error. One can thus define
specialized error handling logic in which the REST API response data (i.e.
headers, code and body) are available in the catching scope.</p>
<p>For instance, the following code prints “User not found” in the event of a 404,
prints out the user’s email if the user exists, raises the underlying
exception if it’s any other HTTP error code, and prints an error otherwise:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">rget</span><span class="p">(</span><span class="s2">&quot;/users/PJKL678&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span>

<span class="k">except</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">PDClientError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;User not found&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Non-transient network or client error&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Version 4.4.0 introduced a new error subclass, PDHTTPError, in which it can be
assumed that the error pertains to a HTTP request and the <code class="docutils literal notranslate"><span class="pre">response</span></code> property
is not <code class="docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">rget</span><span class="p">(</span><span class="s2">&quot;/users/PJKL678&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span>
<span class="k">except</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">PDHTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;User not found&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">e</span>
<span class="k">except</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">PDClientError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Non-transient network or client error&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this heading">¶</a></h2>
<p>When a session is created, a
<a class="reference external" href="https://docs.python.org/3/library/logging.html#logger-objects">Logger object</a>
is created as follows:</p>
<ul class="simple">
<li><p>Its level is unconfigured (<code class="docutils literal notranslate"><span class="pre">logging.NOTSET</span></code>) which causes it to defer to the
level of the parent logger. The parent is the root logger unless specified
otherwise (see <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging-levels">Logging Levels</a>).</p></li>
<li><p>The logger is initially not configured with any handlers. Configuring
handlers is left to the discretion of the user (see <a class="reference external" href="https://docs.python.org/3/library/logging.handlers.html">logging.handlers</a>)</p></li>
<li><p>The logger can be accessed and set through the property
<a class="reference internal" href="module_reference.html#pdpyras.PDSession.log" title="pdpyras.PDSession.log"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.log</span></code></a>.</p></li>
</ul>
<p>In v5.0.0 and later, the attribute <a class="reference internal" href="module_reference.html#pdpyras.PDSession.print_debug" title="pdpyras.PDSession.print_debug"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.print_debug</span></code></a> was
introduced to enable sending debug-level log messages from the client to
command line output. It is used as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Method 1: keyword argument, when constructing a new session:</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">pdpyras</span><span class="o">.</span><span class="n">APISession</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Method 2: on an existing session, by setting the property:</span>
<span class="n">session</span><span class="o">.</span><span class="n">print_debug</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># to disable:</span>
<span class="n">session</span><span class="o">.</span><span class="n">print_debug</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>What this does is assign a <a class="reference external" href="https://docs.python.org/3/library/logging.handlers.html#streamhandler">logging.StreamHandler</a>
directly to the session’s logger and set the log level to <code class="docutils literal notranslate"><span class="pre">logging.DEBUG</span></code>.
All log messages are then sent directly to <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>. The default value
for all sessions is <code class="docutils literal notranslate"><span class="pre">False</span></code>, and it is recommended to keep it that way in
production systems.</p>
</section>
<section id="using-a-proxy-server">
<h2>Using a Proxy Server<a class="headerlink" href="#using-a-proxy-server" title="Permalink to this heading">¶</a></h2>
<p>To configure the client to use a host as a proxy for HTTPS traffic, update the
<code class="docutils literal notranslate"><span class="pre">proxies</span></code> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Host 10.42.187.3 port 4012 protocol https:</span>
<span class="n">session</span><span class="o">.</span><span class="n">proxies</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;https&#39;</span><span class="p">:</span> <span class="s1">&#39;10.42.187.3:4012&#39;</span><span class="p">})</span>
</pre></div>
</div>
</section>
<section id="http-retry-configuration">
<h2>HTTP Retry Configuration<a class="headerlink" href="#http-retry-configuration" title="Permalink to this heading">¶</a></h2>
<p>Session objects support retrying API requests if they receive a non-success
response or if they encounter a network error.</p>
<p>This behavior is configurable through the following properties:</p>
<ul class="simple">
<li><p><a class="reference internal" href="module_reference.html#pdpyras.PDSession.retry" title="pdpyras.PDSession.retry"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.retry</span></code></a>: a dictionary that allows defining per-HTTP-status retry limits</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.PDSession.max_http_attempts" title="pdpyras.PDSession.max_http_attempts"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.max_http_attempts</span></code></a>: The maximum total number of unsuccessful requests to make in the retry loop of <a class="reference internal" href="module_reference.html#pdpyras.PDSession.request" title="pdpyras.PDSession.request"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.request</span></code></a> before returning</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.PDSession.max_network_attempts" title="pdpyras.PDSession.max_network_attempts"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.max_network_attempts</span></code></a>: The maximum number of retries that will be attempted in the case of network or non-HTTP error</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.PDSession.sleep_timer" title="pdpyras.PDSession.sleep_timer"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.sleep_timer</span></code></a>: The initial cooldown factor</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.PDSession.sleep_timer_base" title="pdpyras.PDSession.sleep_timer_base"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.sleep_timer_base</span></code></a>: Factor by which the cooldown time is increased after each unsuccessful attempt</p></li>
<li><p><a class="reference internal" href="module_reference.html#pdpyras.PDSession.stagger_cooldown" title="pdpyras.PDSession.stagger_cooldown"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.stagger_cooldown</span></code></a>: Randomizing factor for increasing successive cooldown wait times</p></li>
</ul>
<section id="default-behavior">
<h3>Default Behavior<a class="headerlink" href="#default-behavior" title="Permalink to this heading">¶</a></h3>
<p>By default, after receiving a status 429 response, sessions will retry an
unlimited number of times, increasing the wait time before retry each
successive time.  When encountering status <code class="docutils literal notranslate"><span class="pre">401</span> <span class="pre">Unauthorized</span></code>, the client
will immediately raise <code class="docutils literal notranslate"><span class="pre">pdpyras.PDClientError</span></code>; this is a non-transient error
caused by an invalid credential.</p>
<p>For all other success or error statuses, the underlying request method in the
client will return the <a class="reference external" href="https://docs.python-requests.org/en/master/api/#requests.Response">requests.Response</a> object.</p>
</section>
<section id="exponential-cooldown">
<h3>Exponential Cooldown<a class="headerlink" href="#exponential-cooldown" title="Permalink to this heading">¶</a></h3>
<p>After each unsuccessful attempt, the client will sleep for a short period that
increases exponentially with each retry.</p>
<p>Let:</p>
<ul class="simple">
<li><p>a = <a class="reference internal" href="module_reference.html#pdpyras.PDSession.sleep_timer_base" title="pdpyras.PDSession.sleep_timer_base"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.sleep_timer_base</span></code></a></p></li>
<li><p>t<sub>0</sub> = <code class="docutils literal notranslate"><span class="pre">sleep_timer</span></code></p></li>
<li><p>t<sub>n</sub> = Sleep time after n attempts</p></li>
<li><p>ρ = <a class="reference internal" href="module_reference.html#pdpyras.PDSession.stagger_cooldown" title="pdpyras.PDSession.stagger_cooldown"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.stagger_cooldown</span></code></a></p></li>
<li><p>r<sub>n</sub> = a randomly-generated real number between 0 and 1, distinct for each n-th request</p></li>
</ul>
<p>Assuming ρ = 0:</p>
<p>t<sub>n</sub> = t<sub>0</sub> a<sup>n</sup></p>
<p>If ρ is nonzero:</p>
<p>t<sub>n</sub> = a (1 + ρ r<sub>n</sub>) t<sub>n-1</sub></p>
</section>
<section id="setting-the-retry-property">
<h3>Setting the retry property<a class="headerlink" href="#setting-the-retry-property" title="Permalink to this heading">¶</a></h3>
<p>The dictionary property <a class="reference internal" href="module_reference.html#pdpyras.PDSession.retry" title="pdpyras.PDSession.retry"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.retry</span></code></a> allows customization of
HTTP retry limits on a per-HTTP-status basis. This includes the ability to
override the above defaults for 401 and 429, although that is not recommended.</p>
<p>Each key in the dictionary represents a HTTP status, and its associated value
is the number of times that the client will retry the request if it receives
that status. <strong>Success statuses (2xx) will be ignored.</strong></p>
<p>If a different error status is encountered on a retry, it won’t count towards
the limit of the first status, but will be counted separately. However, the
total overall number of attempts that will be made to get a success status is
limited by <a class="reference internal" href="module_reference.html#pdpyras.PDSession.max_http_attempts" title="pdpyras.PDSession.max_http_attempts"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.max_http_attempts</span></code></a>. This will always
supersede the maximum number of retries for any status defined in
<a class="reference internal" href="module_reference.html#pdpyras.PDSession.retry" title="pdpyras.PDSession.retry"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.PDSession.retry</span></code></a> if it is lower.</p>
<p>Low-level HTTP request functions in client classes, i.e. <code class="docutils literal notranslate"><span class="pre">get</span></code>, will return
<a class="reference external" href="https://docs.python-requests.org/en/master/api/#requests.Response">requests.Response</a> objects when they run out of retries. Higher-level
functions that require a success status response, i.e.
<a class="reference internal" href="module_reference.html#pdpyras.APISession.list_all" title="pdpyras.APISession.list_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.APISession.list_all</span></code></a> and
<a class="reference internal" href="module_reference.html#pdpyras.EventsAPISession.trigger" title="pdpyras.EventsAPISession.trigger"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pdpyras.EventsAPISession.trigger</span></code></a>, will raise exceptions that include
the response object when they encounter error status responses, but only after
the configured retry limits are reached in the underlying HTTP request methods.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This will take about 30 seconds plus API request time, carrying out four</span>
<span class="c1"># attempts with 2, 4, 8 and 16 second pauses between them, before finally</span>
<span class="c1"># returning the status 404 response object for the user that doesn&#39;t exist:</span>
<span class="n">session</span><span class="o">.</span><span class="n">max_http_attempts</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1"># lower value takes effect</span>
<span class="n">session</span><span class="o">.</span><span class="n">retry</span><span class="p">[</span><span class="mi">404</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span> <span class="c1"># this won&#39;t take effect</span>
<span class="n">session</span><span class="o">.</span><span class="n">sleep_timer</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">session</span><span class="o">.</span><span class="n">sleep_timer_base</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/users/PNOEXST&#39;</span><span class="p">)</span>

<span class="c1"># Same as the above, but with the per-status limit taking precedence, so</span>
<span class="c1"># the total wait time is 62 seconds:</span>
<span class="n">session</span><span class="o">.</span><span class="n">max_http_attempts</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/users/PNOEXST&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#authentication">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-from-header">The From header</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-non-us-service-regions">Using Non-US Service Regions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage-examples">Basic Usage Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rest-api-v2">REST API v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#events-api-v2">Events API v2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generic-client-features">Generic Client Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#urls">URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#query-parameters">Query Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requests-and-responses">Requests and Responses</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-types">Data types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resource-schemas">Resource schemas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#entity-wrapping">Entity Wrapping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wrapped-entity-aware-functions">Wrapped-entity-aware Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#classic-patterns">Classic Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-cases">Special Cases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pagination">Pagination</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#performance-and-completeness-of-results">Performance and Completeness of Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-creating-or-deleting-while-paginating">Updating, creating or deleting while paginating</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#multi-updating">Multi-updating</a></li>
<li class="toctree-l2"><a class="reference internal" href="#error-handling">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-a-proxy-server">Using a Proxy Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#http-retry-configuration">HTTP Retry Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#default-behavior">Default Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exponential-cooldown">Exponential Cooldown</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-the-retry-property">Setting the retry property</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module_reference.html">Module Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contribution Guide</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, PagerDuty Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/user_guide.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>